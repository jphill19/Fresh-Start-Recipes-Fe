(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[62],{9658:(t,e,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/recipe/[recipeId]",function(){return r(7442)}])},1545:(t,e,r)=>{"use strict";async function s(t){let e=`https://whispering-thicket-76959-66145e05673c.herokuapp.com/api/v1/recipes?${t}`;try{let t=await fetch(e,{mode:"cors"});if(!t.ok)throw Error(`Network response was not ok: ${t.statusText}`);return await t.json()}catch(t){throw console.error("Fetch error:",t),t}}async function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"for_ingredient=",r=`https://whispering-thicket-76959-66145e05673c.herokuapp.com/api/v1/ingredients?${e}${t}`;try{let t=await fetch(r,{mode:"cors"});if(!t.ok)throw Error(`Network response was not ok: ${t.statusText}`);return await t.json()}catch(t){throw console.error("Fetch error:",t),t}}async function n(t,e){console.log("post_submit",t);let r={method:"POST",headers:{"Content-Type":"application/json",Authorization:e},body:JSON.stringify(t),mode:"cors"};try{let t=await fetch("https://whispering-thicket-76959-66145e05673c.herokuapp.com/api/v1/recipe_builders",r);if(!t.ok)throw Error(`Network response was not ok: ${t.statusText}`);return await t.json()}catch(t){throw console.log("error",t),console.error("Fetch error:",t),t}}async function o(t,e){let r=`https://whispering-thicket-76959-66145e05673c.herokuapp.com/api/v1/locations?lat=${t}&long=${e}`;try{let t=await fetch(r,{mode:"cors"});if(!t.ok){let e=await t.json();throw Error(`Fetch error: ${e.message} (Status: ${e.status})`)}return await t.json()}catch(t){throw console.error("Fetch error:",t),t}}async function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=`https://whispering-thicket-76959-66145e05673c.herokuapp.com/api/v1/recipes/${t}`;e&&(r+=`?by_location=${e}`);try{let t=await fetch(r);if(!t.ok)throw Error(`Network response was not ok: ${t.statusText}`);return await t.json()}catch(t){throw console.error("Fetch error:",t),t}}r.d(e,{Nu:()=>s,Qo:()=>o,bj:()=>a,uE:()=>i,z$:()=>n})},7442:(t,e,r)=>{"use strict";r.r(e),r.d(e,{__N_SSG:()=>f,default:()=>j});var s=r(4848),i=r(6540),n=r(6715);let o={0:"No Cooking Style",1:"Microwave",2:"Stove Top",3:"Oven / Toaster Oven"},a=function(t){let{cookingStyle:e,instructions:r}=t,[n,a]=(0,i.useState)(!1);return(0,s.jsxs)("ul",{className:`list-none p-0 mt-3 w-full border border-gray-600 rounded-lg bg-white shadow-lg ${n?"overflow-visible":"overflow-hidden"}`,children:[(0,s.jsxs)("button",{type:"button",className:"flex items-center justify-between p-4 bg-gray-100 font-bold text-lg text-gray-800 cursor-pointer border-none outline-none transition-colors duration-200 w-full overflow-hidden text-ellipsis whitespace-nowrap",onClick:()=>{a(!n)},children:[`${o[e]} Instructions`,(0,s.jsx)("img",{src:n?"/caret-up-fill.svg":"/caret-down-fill.svg",alt:n?"Collapse":"Expand",className:"w-5 h-5 flex-shrink-0"})]}),n&&(0,s.jsx)("div",{className:"bg-white w-full",children:r.map(t=>(0,s.jsx)("li",{className:"p-4 text-gray-800 border-t border-gray-200 text-base transition-colors duration-200 w-full break-words",children:(0,s.jsxs)("p",{className:"m-0 pr-4 whitespace-normal break-words",children:[(0,s.jsxs)("strong",{children:["Step ",t.instruction_step,":"]})," ",t.instruction]})},t.instruction_step))})]})},c=function(t){let{items:e,title:r}=t,[n,o]=(0,i.useState)(!1);if(!e||0===e.length)return null;let a="Recipe Tips"===r;return(0,s.jsxs)("ul",{className:`list-none p-0 mt-3 w-full border border-gray-600 rounded-lg bg-white shadow-lg ${n?"overflow-visible":"overflow-hidden"}`,children:[(0,s.jsxs)("button",{type:"button",className:`flex items-center justify-between p-4 bg-gray-100 font-bold text-lg text-gray-800 cursor-pointer border-none outline-none transition-colors duration-200 w-full overflow-hidden text-ellipsis whitespace-nowrap ${a?"bg-gray-100 text-gray-800":""}`,onClick:()=>o(!n),children:[r," ",a&&"\uD83D\uDCA1",(0,s.jsx)("img",{src:n?"/caret-up-fill.svg":"/caret-down-fill.svg",alt:n?"Collapse":"Expand",className:"w-5 h-5 flex-shrink-0"})]}),n&&(0,s.jsx)("div",{className:"bg-white w-full",children:e.map((t,e)=>(0,s.jsx)("li",{className:"p-4 text-gray-800 border-t border-gray-200 text-base transition-colors duration-200 w-full break-words",children:(0,s.jsx)("p",{className:"m-0 pr-4 whitespace-normal break-words",children:t})},e))})]})};var l=r(4772);let u=function(t){let{ingredients:e,servingSize:r,recipeId:o}=t,[a,c]=(0,i.useState)({}),{locationData:u}=(0,l.G)(),d=(0,n.useRouter)(),p=t=>{c(e=>{let r={...e};return r[t]?delete r[t]:r[t]=!0,r})},h=e.reduce((t,e)=>t+(a[e.ingredient]?0:e.price),0),x=u?`${u.name} Total Price`:"Total Price";return(0,s.jsxs)("div",{className:"max-w-[600px] mx-auto p-[20px] bg-white rounded-[8px] shadow-[0_4px_12px_rgba(0,0,0,0.1)]",children:[(0,s.jsx)("h2",{className:"text-left text-[#ff6b6b] mb-[20px] text-[1.7em] font-bold tracking-[1px]",children:"Ingredient List"}),r&&(0,s.jsxs)("p",{className:"text-base text-[#666666] mb-[12px]",children:["Serving Size: ",r]}),e.map((t,e)=>{let r=a[t.ingredient]||!1;return(0,s.jsx)("div",{className:"mb-[12px]",children:(0,s.jsxs)("button",{className:`flex justify-between items-center py-0 px-3 bg-${r?"[#f2f2f2]":"[#f9f9f9]"} border border-[#ddd] rounded-[6px] text-[0.95em] text-${r?"[#999999]":"[#333]"} ${r?"cursor-not-allowed line-through":"cursor-pointer"} w-full transition-colors duration-200`,onClick:()=>p(t.ingredient),children:[(0,s.jsxs)("div",{className:"flex flex-col items-start",children:[(0,s.jsx)("p",{className:"font-bold text-[#333333] mb-1",children:t.ingredient}),(0,s.jsxs)("p",{className:"text-[#666666] text-[0.9em]",children:[t.quantity," ",t.measurement]})]}),(0,s.jsxs)("p",{className:"text-[#333333] font-bold text-right min-w-[60px]",children:["$",r?"0.00":t.price.toFixed(2)]})]})},e)}),(0,s.jsxs)("div",{className:"flex justify-between items-center pt-[16px] border-t border-t-[#e0e0e0] text-[1.1em] font-bold text-[#333333] mt-[20px]",children:[(0,s.jsx)("p",{className:"text-[1.1em] text-[#333333]",children:x}),(0,s.jsxs)("p",{className:"text-[1.1em] font-bold text-right text-[#333333] min-w-[60px]",children:["$",h.toFixed(2)]})]}),u?.id===null&&(0,s.jsx)("button",{className:"block p-3 mt-[16px] bg-[#ff6b6b] text-white text-base font-bold border-none rounded-[6px] cursor-pointer text-center transition-colors duration-300 ease-in-out hover:bg-[#e85c5c] hover:shadow-md active:bg-[#d14d4d]",onClick:()=>d.push(`/location/${o}`),children:"Get Prices for a Local Store"})]})};var d=r(549),p=r.n(d);let h=function(t){let{instructions:e}=t;return e&&0!==e.length?(0,s.jsxs)("div",{className:p().instructionsContainer,"data-testid":"instructions-container",children:[(0,s.jsx)("h2",{className:p().instructionsTitle,"aria-label":"Cooking Instructions",children:"Cooking Instructions"}),(0,s.jsx)("ul",{className:p().instructionsList,"aria-label":"List of instructions",children:e.map(t=>(0,s.jsxs)("li",{className:p().instructionItem,children:[(0,s.jsxs)("p",{className:p().instructionStep,children:["Step ",t.instruction_step]}),(0,s.jsx)("p",{className:p().instructionText,children:t.instruction})]},t.instruction_step))})]}):(0,s.jsx)("p",{children:"No instructions available."})};var x=r(1545),m=r(7420),b=r.n(m),w=r(2730);let g=async(t,e)=>(0,x.bj)(t,e).then(t=>t.data);var f=!0;let j=function(t){let{initialData:e,recipeId:r}=t,{locationData:o}=(0,l.G)(),{recipeId:d}=(0,n.useRouter)().query,{data:p,error:x,isValidating:m}=(0,w.Ay)(d?["recipeDetails",d,o?.id]:null,t=>{let[,e,r]=t;return g(e,r)},{fallbackData:e,revalidateOnFocus:!1}),f=!p&&m;return(0,s.jsx)(i.Fragment,{children:f?(0,s.jsx)("div",{className:"flex justify-center items-center h-[200px]",children:(0,s.jsx)(b(),{color:"#36d7b7",size:50})}):x||!p?(0,s.jsx)("p",{children:"Something went wrong..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{className:"w-[800px] max-w-full h-auto block mx-auto",style:{boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.2)"},src:`${p.attributes.image}`,alt:`${p.attributes.recipe_name}`}),(0,s.jsx)("h2",{className:"text-[2rem] text-[#333] font-bold mt-2 mb-4 tracking-[1px] text-center overflow-hidden text-ellipsis whitespace-normal",style:{textShadow:"1px 1px 2px rgba(0, 0, 0, 0.1)"},children:p.attributes.recipe_name}),p.attributes&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u,{ingredients:p.attributes.ingredients,servingSize:p.attributes.serving_size,recipeId:d}),(0,s.jsx)(c,{items:p.attributes.cookwares,title:"Cookware List"}),p.attributes.cooking_tips&&p.attributes.cooking_tips.length>0&&(0,s.jsx)(c,{items:p.attributes.cooking_tips,title:"Recipe Tips"}),1===p.attributes.instructions.length?(0,s.jsx)(h,{instructions:p.attributes.instructions[0].instructions}):p.attributes.instructions.map((t,e)=>(0,s.jsx)(a,{cookingStyle:t.cooking_style,instructions:t.instructions},e))]})]})})}},549:t=>{t.exports={"instructions-container":"InstructionList_instructions-container__OMrtr","instructions-title":"InstructionList_instructions-title__dCbR3","instructions-list":"InstructionList_instructions-list__tou1W","instruction-item":"InstructionList_instruction-item__HdSKZ","instruction-step":"InstructionList_instruction-step__gW_gV","instruction-text":"InstructionList_instruction-text__Q2pKJ"}}},t=>{var e=e=>t(t.s=e);t.O(0,[757,636,593,792],()=>e(9658)),_N_E=t.O()}]);