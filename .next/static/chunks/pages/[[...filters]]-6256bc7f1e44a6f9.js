(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[939],{9930:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/[[...filters]]",function(){return r(2165)}])},1545:(e,t,r)=>{"use strict";async function s(e){let t=`https://whispering-thicket-76959-66145e05673c.herokuapp.com/api/v1/recipes?${e}`;try{let e=await fetch(t,{mode:"cors"});if(!e.ok)throw Error(`Network response was not ok: ${e.statusText}`);return await e.json()}catch(e){throw console.error("Fetch error:",e),e}}async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"for_ingredient=",r=`https://whispering-thicket-76959-66145e05673c.herokuapp.com/api/v1/ingredients?${t}${e}`;try{let e=await fetch(r,{mode:"cors"});if(!e.ok)throw Error(`Network response was not ok: ${e.statusText}`);return await e.json()}catch(e){throw console.error("Fetch error:",e),e}}async function i(e,t){console.log("post_submit",e);let r={method:"POST",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify(e),mode:"cors"};try{let e=await fetch("https://whispering-thicket-76959-66145e05673c.herokuapp.com/api/v1/recipe_builders",r);if(!e.ok)throw Error(`Network response was not ok: ${e.statusText}`);return await e.json()}catch(e){throw console.log("error",e),console.error("Fetch error:",e),e}}async function o(e,t){let r=`https://whispering-thicket-76959-66145e05673c.herokuapp.com/api/v1/locations?lat=${e}&long=${t}`;try{let e=await fetch(r,{mode:"cors"});if(!e.ok){let t=await e.json();throw Error(`Fetch error: ${t.message} (Status: ${t.status})`)}return await e.json()}catch(e){throw console.error("Fetch error:",e),e}}async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=`https://whispering-thicket-76959-66145e05673c.herokuapp.com/api/v1/recipes/${e}`;t&&(r+=`?by_location=${t}`);try{let e=await fetch(r);if(!e.ok)throw Error(`Network response was not ok: ${e.statusText}`);return await e.json()}catch(e){throw console.error("Fetch error:",e),e}}r.d(t,{Nu:()=>s,Qo:()=>o,bj:()=>a,uE:()=>n,z$:()=>i})},2165:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__N_SSG:()=>k,default:()=>N});var s=r(4848),n=r(6540),i=r(6715),o=r(2730),a=r(1545);let l=function(e){let{name:t,searchValueSetter:r}=e,[i,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[x,p]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=setTimeout(()=>{d(i)},1e3);return()=>clearTimeout(e)},[i]);let{data:u,error:h}=(0,o.Ay)(c?[c,"for_ingredient="]:null,e=>{let[t,r]=e;return(0,a.uE)(t,r)},{dedupingInterval:12e4}),f=e=>{p(e.id),r(e.attributes.name)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{children:t}),(0,s.jsx)("p",{children:"Input a name of an ingredient, then select from the checkbox"}),(0,s.jsx)("input",{type:"text",placeholder:"Search by Ingredient",value:i,onChange:e=>{l(e.target.value)},className:"w-full p-[10px] mb-[12px] text-sm border-2 border-[#ccc] rounded transition-colors duration-300 outline-none focus:border-[#ff6b6b]"}),(0,s.jsxs)("div",{children:[h&&(0,s.jsxs)("p",{className:"text-red-500",children:["Error fetching data: ",h.message]}),u&&u.data.length>0?u.data.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded transition-colors duration-200 cursor-pointer hover:bg-[#f7f7f7]",children:[(0,s.jsx)("input",{type:"checkbox",id:`checkbox-${e.id}`,checked:x===e.id,onChange:()=>f(e),className:"appearance-none w-[18px] h-[18px] border-2 border-[#ff6b6b] rounded bg-transparent transition-colors duration-200 checked:bg-[#ff6b6b] peer"}),(0,s.jsx)("label",{htmlFor:`checkbox-${e.id}`,className:"text-sm text-[#333] peer-checked:font-bold peer-checked:text-[#ff6b6b]",children:e.attributes.name})]},e.id)):c&&(0,s.jsxs)("p",{className:"text-gray-500",children:['No ingredients found for "',c,'".']})]})]})},c=function(e){let{options:t,name:r,searchValueSetter:i}=e,[o,a]=(0,n.useState)(null),l=e=>{a(e),i(e)};return(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:r}),(0,s.jsx)("div",{children:Object.entries(t).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{className:"flex items-center gap-2 my-3",children:[(0,s.jsx)("input",{type:"checkbox",id:`checkbox-${t}`,checked:o===t,onChange:()=>l(t),className:"peer appearance-none w-[18px] h-[18px] border-2 border-[#ff6b6b] rounded bg-transparent transition-colors duration-200 checked:bg-[#ff6b6b]"}),(0,s.jsx)("label",{htmlFor:`checkbox-${t}`,className:"text-sm text-[#333] font-normal peer-checked:font-bold peer-checked:text-[#ff6b6b]",children:r})]},t)})})]})},d=function(e){let{name:t,searchValueSetter:r}=e,[i,o]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{r(i?"Single":"Multiple")},[i,r]),(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)("h2",{children:t}),(0,s.jsxs)("div",{className:"relative flex w-[200px] h-[50px] rounded-[25px] bg-[#ccc] cursor-pointer items-center justify-between mt-[10px] mx-auto transition-colors duration-300",onClick:()=>{o(!i),r(i?"Multiple":"Single")},children:[(0,s.jsx)("span",{className:`relative  w-1/2 text-center z-20 transition-colors duration-300 ${i?"text-white font-bold":""}`,children:"Single"}),(0,s.jsx)("span",{className:`relative  w-1/2 text-center z-20 transition-colors duration-300 ${i?"":"text-white font-bold"}`,children:"Multiple"}),(0,s.jsx)("div",{className:`absolute top-0 left-0 w-1/2 h-full rounded-[25px] bg-[#ff6b6b] transition-transform duration-300 z-10 ${i?"translate-x-0":"translate-x-full"}`})]})]})},x=function(e){let{onClose:t,activeModal:r,onFilterChange:i}=e,[o,a]=(0,n.useState)(null),x=e=>{a(e)};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-5 w-4/5 max-w-[500px] max-h-[80vh] shadow-lg relative z-50 animate-fadeIn flex flex-col overflow-visible",children:[(()=>{switch(r){case"by_ingredient":return(0,s.jsx)(l,{name:"Filter by an ingredient",searchValueSetter:x});case"by_style":return(0,s.jsx)(c,{options:{3:"Oven",1:"Microwave",2:"Stove",0:"None required"},name:"Filter by a preferred cooking style",searchValueSetter:x});case"by_serving":return(0,s.jsx)(d,{options:{3:"Oven",1:"Microwave",2:"Stove",0:"None required"},name:"Filter by Servings",searchValueSetter:x});case"by_price":return(0,s.jsx)(c,{options:{0:"Less than $5",2:"Less than $10",3:"Greater than $10"},name:"Filter by Prices",searchValueSetter:x});default:return null}})(),(0,s.jsxs)("div",{className:"flex justify-end gap-[10px] mt-5",children:[(0,s.jsx)("button",{className:"py-[10px] px-[15px] border-none rounded cursor-pointer text-base bg-[#f0f0f0] text-[#333]",onClick:t,children:"Reset"}),(0,s.jsx)("button",{className:"py-[10px] px-[15px] border-none rounded cursor-pointer text-base bg-[#ff6b6b] text-white",onClick:()=>{i(r,o),t()},children:"View Results"})]})]})})};function p(e){let{isActive:t}=e;return t?(0,s.jsx)("img",{src:"/white-x.svg",className:"w-[12px] h-[12px] ml-[5px]",alt:"x"}):(0,s.jsx)("img",{src:"/caret-down-fill.svg",className:"w-[12px] h-[12px] ml-[5px]",alt:"drop down arrow"})}let u=function(e){let{onFilterChange:t,activeFilters:r}=e,[i,o]=(0,n.useState)(null),a=(0,n.useMemo)(()=>(0,s.jsx)(p,{isActive:r.by_ingredient}),[r.by_ingredient]),l=(0,n.useMemo)(()=>(0,s.jsx)(p,{isActive:r.by_style}),[r.by_style]),c=(0,n.useMemo)(()=>(0,s.jsx)(p,{isActive:r.by_serving}),[r.by_serving]),d=(0,n.useMemo)(()=>(0,s.jsx)(p,{isActive:r.by_price}),[r.by_price]),u=(0,n.useCallback)(e=>{r[e]?t(e,null):o(e)},[t,r]);return(0,s.jsxs)("div",{className:"flex gap-[10px] items-center mt-[5px] p-[10px] overflow-x-auto whitespace-normal break-words scrollbar-hide",children:[(0,s.jsxs)("div",{className:`inline-flex items-center py-[8px] px-[12px] rounded-[20px] bg-${r.by_ingredient?"black":"[#f2f2f2]"} text-${r.by_ingredient?"white":"black"} font-semibold text-[0.7em] cursor-pointer whitespace-nowrap`,onClick:()=>u("by_ingredient"),children:["Ingredient",a]}),(0,s.jsxs)("div",{className:`inline-flex items-center py-[8px] px-[12px] rounded-[20px] bg-${r.by_style?"black":"[#f2f2f2]"} text-${r.by_style?"white":"black"} font-semibold text-[0.7em] cursor-pointer whitespace-nowrap`,onClick:()=>u("by_style"),children:["Cooking Style",l]}),(0,s.jsxs)("div",{className:`inline-flex items-center py-[8px] px-[12px] rounded-[20px] bg-${r.by_serving?"black":"[#f2f2f2]"} text-${r.by_serving?"white":"black"} font-semibold text-[0.7em] cursor-pointer whitespace-nowrap`,onClick:()=>u("by_serving"),children:["Servings",c]}),(0,s.jsxs)("div",{className:`inline-flex items-center py-[8px] px-[12px] rounded-[20px] bg-${r.by_price?"black":"[#f2f2f2]"} text-${r.by_price?"white":"black"} font-semibold text-[0.7em] cursor-pointer whitespace-nowrap`,onClick:()=>u("by_price"),children:["Price",d]}),i&&(0,s.jsx)(x,{onClose:()=>{o(null)},activeModal:i,onFilterChange:t,activeFilters:r})]})},h=function(e){let{resultsCount:t}=e,r=(0,i.useRouter)();return(0,s.jsxs)("div",{className:"flex justify-between items-center p-[10px] mt-[5px] rounded-[10px] gap-[10px]",children:[(0,s.jsxs)("h2",{className:"text-base font-semibold text-black m-0",children:[t," results"]}),(0,s.jsx)("button",{className:"py-[8px] px-[12px] text-[0.8rem] font-semibold text-black bg-white border border-[#ccc] rounded-[20px] cursor-pointer transition-colors duration-300 ease-in-out",onClick:()=>{r.push("/")},children:"Reset"})]})};var f=r(1106),b=r.n(f),m=r(9965),g=r.n(m);let w=function(e){let{recipe:t,excludedIngredients:r,onIngredientClick:n,recipeId:i}=e,{recipe_name:o,serving_size:a,ingredients:l,image:c}=t,d=l.reduce((e,t)=>e+(r[t.ingredient]?0:t.price),0);return(0,s.jsxs)("div",{className:"bg-white border border-[#e2e2e2] rounded-[8px] p-[16px] my-[16px] mx-auto w-[90%] max-w-[600px] shadow-sm",tabIndex:"0",children:[(0,s.jsxs)(b(),{href:`/recipe/${i}`,children:[(0,s.jsx)("h2",{className:"text-[1.5em] text-[#333333] mb-[12px] cursor-pointer",children:o}),(0,s.jsx)(g(),{className:"w-full h-auto rounded-[8px] object-cover mb-[16px]",src:c,alt:c.alt||`Image of ${o}`,width:300,height:200})]}),(0,s.jsx)("div",{className:"flex flex-col gap-[8px] mb-[16px]",children:l.map((e,t)=>{let i=r[e.ingredient];return(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("button",{className:`flex-grow p-[10px] bg-[#f7f7f7] border border-[#e2e2e2] rounded text-left text-[0.9em] text-[#333333] cursor-pointer mr-[8px] whitespace-normal overflow-hidden text-ellipsis ${i?"bg-[#d3d3d3] text-[#888888] line-through":""}`,onClick:()=>n(e.ingredient),children:e.ingredient}),(0,s.jsxs)("span",{className:`text-[0.9em] text-[#555555] min-w-[60px] text-right ${i?"text-[#888888] line-through":""}`,children:["$",i?"0.00":e.price.toFixed(2)]})]},t)})}),(0,s.jsxs)("div",{className:"flex justify-between text-[0.9em] text-[#555555] border-t border-[#e2e2e2] pt-[12px]",children:[(0,s.jsx)("p",{className:"m-0",children:`Servings: ${a}`}),(0,s.jsx)("p",{className:"m-0",children:`Total Cost: $${d.toFixed(2)}`})]})]})},y=function(e){let{data:t=[]}=e,[r,i]=(0,n.useState)({});(0,n.useEffect)(()=>{i({})},[]);let o=e=>{i(t=>{let r={...t};return r[e]?delete r[e]:r[e]=!0,r})};return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center w-[95%] p-[8px] gap-[16px]",children:t.length>0?t.map(e=>(0,s.jsx)(w,{recipe:e.attributes,excludedIngredients:r,onIngredientClick:o,recipeId:e.id},e.id)):(0,s.jsx)("p",{children:"No recipes available."})})};var j=r(7420),v=r.n(j),k=!0;function N(e){let{initialData:t,initialFilters:r}=e,o=(0,i.useRouter)(),[l,c]=(0,n.useState)(t),[d,x]=(0,n.useState)(r),[p,f]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{if(!o.isReady||o.isFallback)return;let e={...o.query};if(delete e.filters,o.query.filters){let t=o.query.filters||[];for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1]}JSON.stringify(e)!==JSON.stringify(d)&&(x(e),b(e))},[o.isReady,o.query]),o.isFallback)return(0,s.jsx)("div",{className:"flex justify-center items-center h-52",children:(0,s.jsx)(v(),{color:"#36d7b7",size:50})});let b=async e=>{console.log("fetching data"),f(!0);try{let t=new URLSearchParams(e).toString(),r=await (0,a.Nu)(t);c(r.data)}catch(e){console.error("Error fetching filtered data:",e)}finally{f(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u,{onFilterChange:(e,t)=>{if(!["by_ingredient","by_style","by_serving","by_price","by_recipe"].includes(e)){console.error(`Unrecognized filter key: ${e}`);return}let r={...d};t?r[e]=t:delete r[e],o.push({pathname:"/",query:r})},activeFilters:d}),Object.keys(d).length>0&&(0,s.jsx)(h,{resultsCount:l.length}),p?(0,s.jsx)("div",{className:"flex justify-center items-center h-52",children:(0,s.jsx)(v(),{color:"#36d7b7",size:50})}):(0,s.jsx)(y,{data:l})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[757,965,636,593,792],()=>t(9930)),_N_E=e.O()}]);